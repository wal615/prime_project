# Introduction to R with an example

### Basics concepts of R

#### Object-oriented

R is an object-oriented language

- Everything in R is an object and each object has a class e.g. matrix, list, data.frame,etc...

- For different classes, R has different operations which are called "Method"


### An example of Linear Regression

#### Mathematical equation

\[
  Y = \beta_0 + \beta_1X + \epsilon,
\] 
Where $\beta_0$ is the intercept and $\beta_1$ is the slope

#### Goal

Estimate the coefficients and prediction

### Example Cars' Speed and distances to stop 

```{r, eval=FALSE}
?cars
```

#### Mathematical equation

\[
  Y_{dist} = \beta_0 + \beta_{speed}X_{speed} + \epsilon,
\] 
Where $\beta_0$ is the intercept and $\beta_{speed}$ is the slope

#### Goal

Using a car's speed to predict the distance it will use to stop

- esitmate the $\beta_0$ and $\beta_{speed}$


### Check the data

```{r check data, collapse=TRUE}
head(cars)
class(cars)
```

### Plot X and Y together 

```{r plot x and y, collapse=TRUE}
plot(x = cars$speed, y = cars$dist)
```

### Plot a box-plot of speeds for outliers
```{r plot speed, collapse=TRUE}
boxplot(cars$speed, main="Speed")
```

### Plot a box-plot of distances for outliers
```{r plot distance, collapse=TRUE, fill = TRUE}
boxplot(cars$dist, main="Distance")
```

### Fit the model 

```{r fit the model, collapse=TRUE, tidy=TRUE}
help(lm)
class(lm)
linearMod <- lm(dist ~ speed, data=cars)
class(linearMod)
print(linearMod)
```

### plot the fitted model

```{r plot the model, collapse=TRUE, tidy=TRUE}
par(mfrow = c(2, 2))
plot(linearMod)
```

### Using the fitted model to predict

```{r prediction, collapse=TRUE, tidy=TRUE}
help(predict)
help(predict.lm)
# esimation
est <- predict(linearMod)
est[1:5]
# prediction
new_data <- data.frame(speed = 200)
pre <- predict(linearMod, newdata = new_data)
pre
```

### plot the predicted value vs true

```{r predicted vs true, collapse=TRUE, tidy=TRUE}
plot(x = cars$speed, y = cars$dist)
lines(x = cars$speed, linearMod$fitted.values, type='l', col='blue')
```
